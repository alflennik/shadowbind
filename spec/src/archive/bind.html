<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Walk Test</title>
</head>
<body>
  <shadow-binding></shadow-binding>
  <script type="module">
    import { subscribe, publish } from '../src/shadowbind.js'

    window.customElements.define('shadow-binding', class extends HTMLElement { // eslint-disable-line
      constructor () {
        super()
        subscribe(this)
        this.root = this.attachShadow({ mode: 'open' })
        this.root.innerHTML = /* @html */`
        <span :text="text" id="text"></span>
        <span :text="escaping" id="escaping"></span>
        <span :html="html" id="html"></span>
        <span :show="show" id="show"></span>
        <span :show="hide" id="hide"></span>
        <span attr:my-attr="myAttr" id="my-attr"></span>
        <span attr:none="none" id="none"></span>
        `
      }

      getActual () {
        return {
          text: this.root.getElementById('text').innerHTML,
          escaping: this.root.getElementById('escaping').innerHTML,
          html: this.root.getElementById('html').innerHTML,
          show: this.root.getElementById('show').style.display,
          hide: this.root.getElementById('hide').style.display,
          myAttr: this.root.getElementById('my-attr').getAttribute('my-attr'),
          none: this.root.getElementById('none').getAttribute('none')
        }
      }

      getExpected () {
        return {
          text: 'This text',
          escaping: '&gt;/span&lt;',
          html: 'This html',
          show: '',
          hide: 'none',
          myAttr: 'This attr',
          none: null
        }
      }
    })

    publish({
      text: 'This text',
      escaping: '</span>',
      html: 'This html',
      show: true,
      hide: false,
      myAttr: 'This attr',
      none: null
    })
</script>
</body>
</html>
